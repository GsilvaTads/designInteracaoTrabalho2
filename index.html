<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ache o coração puro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Fundo principal do jogo -->
    <div class="fundo" id="fundo">
        <!-- Texto de instrução -->
        <div id="instrucao">
            Olá aventureira Gi, descubra<br>
            em qual baú está o coração puro
        </div>

        <!-- Mensagem de incentivo -->
        <div id="vamoslah">Vamos lá! Encontre o coração puro!</div>

        <!-- Figuras do jogo -->
        <div class="figura" id="figura1" style="left: 5vw; top: 10vw;">
            <img src="imagens/bau_fechado.jpg" alt="Figura 1" style="width: 100%; height: 100%;">
        </div>
        <div class="figura" id="figura2" style="left: 30vw; top: 10vw;">
            <img src="imagens/bau_fechado.jpg" alt="Figura 2" style="width: 100%; height: 100%;">
        </div>
        <div class="figura" id="figura3" style="left: 5vw; top: 25vw;">
            <img src="imagens/bau_fechado.jpg" alt="Figura 3" style="width: 100%; height: 100%;">
        </div>
        <div class="figura" id="figura4" style="left: 30vw; top: 25vw;">
            <img src="imagens/bau_fechado.jpg" alt="Figura 4" style="width: 100%; height: 100%;">
        </div>

        <!-- Objetivo escondido -->
        <div id="div2" style="left: 5vw; top: 25vw; z-index: 1;">D2</div>

        <!-- Personagem controlado -->
        <div id="div1">
            <img src="imagens/gi.jpg" alt="Personagem" style="width: 80%; height: 100%;">
        </div>

        <!-- Nova figura exibida após a colisão -->
        <div class="nova-figura" id="novaFigura" style="display: none;">
            <img src="imagens/coracao.jpg" alt="Coração" style="width: 90%; height: 90%;">
        </div>
    </div>

    <!-- Painel de controle -->
    <div class="painel">
        <button type="button" id="iniciar">Iniciar</button><br><hr>
        <button type="button" id="reiniciar">Reiniciar</button><br><hr>
        <button type="button" id="acima">Acima</button><br>
        <button type="button" id="esquerda">Esquerda</button>
        <button type="button" id="direita">Direita</button><br>
        <button type="button" id="baixo">Abaixo</button><hr>
    </div>

    <!-- Mensagem de conclusão -->
    <div id="mensagem"></div>

    <!-- Script principal -->
    <script>
        let musica; // Variável global para o áudio
        let jogoIniciado = false; // Controle do estado do jogo

        const div1 = document.getElementById("div1");
        const div2 = document.getElementById("div2");
        const fundo = document.getElementById("fundo");
        const novaFigura = document.getElementById("novaFigura");
        const figura2 = document.getElementById("figura2");

        // Função de iniciar o jogo
        function iniciar() {
            div1.style.left = "20vw";
            div1.style.top = "20vw";
            div2.style.visibility = "hidden";
            novaFigura.style.display = "none";
            jogoIniciado = true;

            document.getElementById("vamoslah").style.visibility = "visible";
            document.querySelector("#iniciar").style.visibility = "hidden";
            document.querySelector("#instrucao").style.visibility = "hidden";
            document.getElementById("mensagem").innerText = "";

            if (!musica) musica = new Audio('som/kids_play.mp3');
            musica.play();
        }

        // Função de reiniciar o jogo
        function reiniciar() {
            div1.style.left = "1vw";
            div1.style.top = "2vw";
            div2.style.visibility = "hidden";
            novaFigura.style.display = "none";
            jogoIniciado = false;

            document.getElementById("vamoslah").style.visibility = "hidden";
            document.querySelector("#iniciar").style.visibility = "visible";
            document.querySelector("#instrucao").style.visibility = "visible";

            if (musica) {
                musica.pause();
                musica.currentTime = 0;
            }
        }

        // Movimentos do personagem
        function moverDireita() {
            const div1Left = parseInt(getComputedStyle(div1).left);
            const fundoWidth = parseInt(getComputedStyle(fundo).width);
            const div1Width = parseInt(getComputedStyle(div1).width);
            if (div1Left + div1Width + 5 <= fundoWidth) div1.style.left = div1Left + 5 + "px";
        }

        function moverEsquerda() {
            const div1Left = parseInt(getComputedStyle(div1).left);
            if (div1Left - 5 >= 0) div1.style.left = div1Left - 5 + "px";
        }

        function moverAcima() {
            const div1Top = parseInt(getComputedStyle(div1).top);
            if (div1Top - 5 >= 0) div1.style.top = div1Top - 5 + "px";
        }

        function moverAbaixo() {
            const div1Top = parseInt(getComputedStyle(div1).top);
            const fundoHeight = parseInt(getComputedStyle(fundo).height);
            const div1Height = parseInt(getComputedStyle(div1).height);
            if (div1Top + div1Height + 5 <= fundoHeight) div1.style.top = div1Top + 5 + "px";
        }

        function move(direcao) {
            if (!jogoIniciado) return;
            if (direcao === "direita") moverDireita();
            else if (direcao === "esquerda") moverEsquerda();
            else if (direcao === "acima") moverAcima();
            else if (direcao === "baixo") moverAbaixo();
            verificarColisao();
        }

        // Verificação de colisão
        function verificarColisao() {
            // Lógica de colisão
        }

        // Eventos de clique nos botões
        document.querySelector("#iniciar").addEventListener("click", iniciar);
        document.querySelector("#reiniciar").addEventListener("click", reiniciar);
        document.querySelector("#acima").addEventListener("click", () => move('acima'));
        document.querySelector("#esquerda").addEventListener("click", () => move('esquerda'));
        document.querySelector("#direita").addEventListener("click", () => move('direita'));
        document.querySelector("#baixo").addEventListener("click", () => move('baixo'));
    </script>
</body>
</html>
